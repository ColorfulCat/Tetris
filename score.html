<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>比赛计分器</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      touch-action: manipulation;
      user-select: none;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      color: white;
      overflow-x: hidden;
      position: relative;
      padding: 20px;
    }
    
    .game-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 25px;
      position: relative;
      z-index: 10;
      width: 100%;
      max-width: 600px;
    }
    
    .controls {
      display: flex;
      gap: 20px;
      margin-bottom: 25px;
      flex-wrap: nowrap;
      justify-content: center;
      align-items: center;
    }
    
    .team-count-selector {
      background: rgba(0, 0, 0, 0.7);
      border-radius: 20px;
      padding: 18px 25px;
      display: flex;
      align-items: center;
      gap: 12px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.6);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .team-count-selector label {
      font-size: 17px;
      color: #fff;
      font-weight: 500;
    }
    
    .team-count-selector select {
      background: rgba(255, 255, 255, 0.15);
      border: 1px solid rgba(255, 255, 255, 0.3);
      border-radius: 10px;
      padding: 10px 15px;
      color: white;
      font-size: 16px;
      outline: none;
      transition: all 0.3s ease;
    }
    
    .team-count-selector select:hover {
      background: rgba(255, 255, 255, 0.2);
      border-color: rgba(255, 255, 255, 0.5);
    }
    
    .team-count-selector select option {
      background: #333;
      color: white;
    }
    
    .action-btn {
      padding: 18px 35px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 30px;
      font-size: 17px;
      font-weight: bold;
      color: white;
      text-align: center;
      box-shadow: 
        0 10px 30px rgba(102, 126, 234, 0.5),
        inset 0 2px 4px rgba(255, 255, 255, 0.2);
      transition: all 0.3s ease;
      border: none;
      cursor: pointer;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      position: relative;
      overflow: hidden;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    .action-btn.reset {
      background: linear-gradient(135deg, #ff416c, #ff4b2b);
      box-shadow: 0 10px 30px rgba(255, 75, 43, 0.5);
    }
    
    .action-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      transition: left 0.6s;
    }
    
    .action-btn:hover {
      transform: translateY(-4px);
      box-shadow: 
        0 15px 40px rgba(102, 126, 234, 0.7),
        inset 0 2px 4px rgba(255, 255, 255, 0.3);
    }
    
    .action-btn.reset:hover {
      box-shadow: 0 15px 40px rgba(255, 75, 43, 0.7);
    }
    
    .action-btn:hover::before {
      left: 100%;
    }
    
    .action-btn:active {
      transform: translateY(-2px) scale(0.98);
    }
    
    .scoreboard {
      background: rgba(0, 0, 0, 0.7);
      border-radius: 20px;
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6);
      padding: 25px;
      width: 100%;
      max-width: 600px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .teams-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 20px;
    }
    
    .team-card {
      background: var(--team-bg-color);
      border-radius: 24px;
      padding: 25px;
      text-align: center;
      transition: all 0.4s ease;
      border: 2px solid var(--team-color);
      position: relative;
      overflow: hidden;
      backdrop-filter: blur(10px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
    }
    
    .team-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 5px;
      background: var(--team-color);
      box-shadow: 0 0 15px var(--team-color);
      border-radius: 24px 24px 0 0;
    }
    
    .team-card:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
      border-color: var(--team-color);
    }
    
    .team-name {
      font-size: 20px;
      font-weight: bold;
      margin-bottom: 20px;
      color: #fff;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.6);
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    .score-display {
      font-size: 96px;
      font-weight: 900;
      margin: 20px 0;
      color: #fff;
      text-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
      min-height: 100px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      font-family: 'Arial Black', Arial, sans-serif;
    }
    
    .score-controls {
      display: flex;
      gap: 15px;
      justify-content: center;
      margin-top: 20px;
    }
    
    .score-btn {
      width: 60px;
      height: 60px;
      border-radius: 18px;
      border: none;
      font-size: 28px;
      font-weight: bold;
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
      position: relative;
      overflow: hidden;
    }
    
    .score-btn::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 18px;
      transition: all 0.3s ease;
      transform: translate(-50%, -50%);
    }
    
    .score-btn:active::before {
      width: 100%;
      height: 100%;
    }
    
    .score-btn.plus {
      background: linear-gradient(135deg, #50C878, #32CD32);
      box-shadow: 0 6px 20px rgba(80, 200, 120, 0.4);
    }
    
    .score-btn.minus {
      background: linear-gradient(135deg, #ff6b6b, #ee5a52);
      box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);
    }
    
    .score-btn:hover {
      transform: scale(1.15);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    }
    
    .score-btn.plus:hover {
      box-shadow: 0 10px 30px rgba(80, 200, 120, 0.6);
    }
    
    .score-btn.minus:hover {
      box-shadow: 0 10px 30px rgba(255, 107, 107, 0.6);
    }
    
    .score-btn:active {
      transform: scale(0.95);
    }
    
    /* 自定义确认弹窗 */
    .confirm-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      backdrop-filter: blur(5px);
    }
    
    .confirm-modal.show {
      display: flex;
    }
    
    .confirm-content {
      background: rgba(0, 0, 0, 0.9);
      border-radius: 28px;
      padding: 30px;
      text-align: center;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
      border: 1px solid rgba(255, 255, 255, 0.2);
      max-width: 350px;
      width: 90%;
      animation: modalSlideIn 0.3s ease;
    }
    
    @keyframes modalSlideIn {
      from {
        transform: scale(0.8) translateY(-50px);
        opacity: 0;
      }
      to {
        transform: scale(1) translateY(0);
        opacity: 1;
      }
    }
    
    .confirm-title {
      font-size: 22px;
      font-weight: bold;
      color: #fff;
      margin-bottom: 15px;
    }
    
    .confirm-message {
      font-size: 16px;
      color: #ccc;
      margin-bottom: 25px;
      line-height: 1.5;
    }
    
    .confirm-buttons {
      display: flex;
      gap: 15px;
      justify-content: center;
    }
    
    .confirm-btn {
      padding: 12px 25px;
      border-radius: 18px;
      border: none;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      min-width: 80px;
    }
    
    .confirm-btn.cancel {
      background: rgba(255, 255, 255, 0.1);
      color: #fff;
      border: 1px solid rgba(255, 255, 255, 0.3);
    }
    
    .confirm-btn.cancel:hover {
      background: rgba(255, 255, 255, 0.2);
    }
    
    .confirm-btn.confirm {
      background: linear-gradient(135deg, #ff416c, #ff4b2b);
      color: white;
      box-shadow: 0 5px 15px rgba(255, 75, 43, 0.4);
    }
    
    .confirm-btn.confirm:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(255, 75, 43, 0.6);
    }
    
    /* 队伍颜色和背景色 */
    .team-1 { 
      --team-color: #ff4757; 
      --team-bg-color: linear-gradient(135deg, rgba(255, 71, 87, 0.2), rgba(255, 71, 87, 0.1));
    }
    .team-2 { 
      --team-color: #3742fa; 
      --team-bg-color: linear-gradient(135deg, rgba(55, 66, 250, 0.2), rgba(55, 66, 250, 0.1));
    }
    .team-3 { 
      --team-color: #2ed573; 
      --team-bg-color: linear-gradient(135deg, rgba(46, 213, 115, 0.2), rgba(46, 213, 115, 0.1));
    }
    .team-4 { 
      --team-color: #ffa502; 
      --team-bg-color: linear-gradient(135deg, rgba(255, 165, 2, 0.2), rgba(255, 165, 2, 0.1));
    }
    .team-5 { 
      --team-color: #a55eea; 
      --team-bg-color: linear-gradient(135deg, rgba(165, 94, 234, 0.2), rgba(165, 94, 234, 0.1));
    }
    .team-6 { 
      --team-color: #26de81; 
      --team-bg-color: linear-gradient(135deg, rgba(38, 222, 129, 0.2), rgba(38, 222, 129, 0.1));
    }
    .team-7 { 
      --team-color: #fd79a8; 
      --team-bg-color: linear-gradient(135deg, rgba(253, 121, 168, 0.2), rgba(253, 121, 168, 0.1));
    }
    .team-8 { 
      --team-color: #00cec9; 
      --team-bg-color: linear-gradient(135deg, rgba(0, 206, 201, 0.2), rgba(0, 206, 201, 0.1));
    }
    .team-9 { 
      --team-color: #fdcb6e; 
      --team-bg-color: linear-gradient(135deg, rgba(253, 203, 110, 0.2), rgba(253, 203, 110, 0.1));
    }
    .team-10 { 
      --team-color: #6c5ce7; 
      --team-bg-color: linear-gradient(135deg, rgba(108, 92, 231, 0.2), rgba(108, 92, 231, 0.1));
    }
    
    /* 背景动画 */
    .background {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      z-index: 1;
    }
    
    .shape {
      position: absolute;
      background: rgba(255, 255, 255, 0.04);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 15px;
      animation: float 20s infinite linear;
    }
    
    @keyframes float {
      0% {
        transform: translateY(0) rotate(0deg);
        opacity: 0.3;
      }
      50% {
        opacity: 0.6;
      }
      100% {
        transform: translateY(-100vh) rotate(360deg);
        opacity: 0;
      }
    }
    
    /* 响应式设计 */
    @media (max-width: 768px) {
      .teams-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
      }
      
      .controls {
        flex-direction: row;
        align-items: center;
        gap: 15px;
        flex-wrap: nowrap;
      }
      
      .team-count-selector {
        flex: 1;
        min-width: 0;
        padding: 15px 20px;
      }
      
      .team-count-selector label {
        font-size: 15px;
      }
      
      .team-count-selector select {
        padding: 8px 12px;
        font-size: 14px;
      }
      
      .action-btn {
        padding: 15px 20px;
        font-size: 15px;
        white-space: nowrap;
        flex-shrink: 0;
      }
    }
    
    @media (max-width: 480px) {
      body {
        padding: 10px;
      }
      
      .scoreboard {
        padding: 15px;
      }
      
      .controls {
        gap: 10px;
        margin-bottom: 20px;
      }
      
      .team-count-selector {
        padding: 12px 15px;
      }
      
      .team-count-selector label {
        font-size: 14px;
      }
      
      .team-count-selector select {
        padding: 6px 10px;
        font-size: 13px;
      }
      
      .teams-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
      }
      
      .team-card {
        padding: 12px;
      }
      
      .team-name {
        font-size: 14px;
        margin-bottom: 12px;
      }
      
      .score-display {
        font-size: 84px;
        min-height: 80px;
      }
      
      .score-btn {
        width: 45px;
        height: 45px;
        font-size: 20px;
      }
      
      .score-controls {
        gap: 8px;
        margin-top: 15px;
      }
      
      .action-btn {
        padding: 12px 18px;
        font-size: 13px;
      }
      
      .confirm-content {
        padding: 25px;
        max-width: 300px;
      }
      
      .confirm-title {
        font-size: 20px;
      }
      
      .confirm-message {
        font-size: 15px;
      }
    }
  </style>
</head>
<body>
  <div class="background" id="background"></div>
  
  <div class="game-container">
    <div class="controls">
      <div class="team-count-selector">
        <label for="teamCount">队伍数量:</label>
        <select id="teamCount">
          <option value="2">2队</option>
          <option value="3">3队</option>
          <option value="4" selected>4队</option>
          <option value="5">5队</option>
          <option value="6">6队</option>
          <option value="7">7队</option>
          <option value="8">8队</option>
          <option value="9">9队</option>
          <option value="10">10队</option>
        </select>
      </div>
      
      <button class="action-btn reset" id="resetBtn">重置比分</button>
    </div>
    
    <div class="scoreboard">
      <div class="teams-grid" id="teamsGrid">
        <!-- 队伍卡片将通过JavaScript动态生成 -->
      </div>
    </div>
  </div>

  <!-- 自定义确认弹窗 -->
  <div class="confirm-modal" id="confirmModal">
    <div class="confirm-content">
      <div class="confirm-title">确认重置</div>
      <div class="confirm-message">确定要重置所有队伍的分数吗？此操作无法撤销。</div>
      <div class="confirm-buttons">
        <button class="confirm-btn cancel" id="cancelBtn">取消</button>
        <button class="confirm-btn confirm" id="confirmBtn">确认重置</button>
      </div>
    </div>
  </div>

  <script>
    // 游戏状态
    let teamCount = 4;
    let scores = {};
    
    // 初始化
    function init() {
      createBackground();
      loadScores();
      setupEventListeners();
      updateTeamCount();
    }
    
    // 创建动态背景
    function createBackground() {
      const bg = document.getElementById('background');
      const colors = ['rgba(255,255,255,0.06)', 'rgba(255,255,255,0.04)', 'rgba(255,255,255,0.03)'];
      
      for (let i = 0; i < 25; i++) {
        const shape = document.createElement('div');
        shape.classList.add('shape');
        
        // 随机大小
        const size = Math.random() * 120 + 60;
        shape.style.width = `${size}px`;
        shape.style.height = `${size}px`;
        
        // 随机位置
        shape.style.left = `${Math.random() * 100}%`;
        shape.style.top = `${Math.random() * 100}%`;
        
        // 随机颜色
        shape.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        
        // 随机动画
        shape.style.animationDuration = `${Math.random() * 40 + 20}s`;
        shape.style.animationDelay = `${Math.random() * 8}s`;
        
        bg.appendChild(shape);
      }
    }
    
    // 设置事件监听器
    function setupEventListeners() {
      document.getElementById('teamCount').addEventListener('change', updateTeamCount);
      
      // 重置按钮事件 - 使用touchstart和click双重绑定确保手机端响应
      const resetBtn = document.getElementById('resetBtn');
      resetBtn.addEventListener('click', showResetConfirm);
      resetBtn.addEventListener('touchstart', function(e) {
        e.preventDefault();
        showResetConfirm();
      }, { passive: false });
      
      // 确认弹窗事件
      document.getElementById('cancelBtn').addEventListener('click', hideResetConfirm);
      document.getElementById('confirmBtn').addEventListener('click', confirmReset);
      
      // 点击弹窗外部关闭
      document.getElementById('confirmModal').addEventListener('click', function(e) {
        if (e.target === this) {
          hideResetConfirm();
        }
      });
    }
    
    // 显示重置确认弹窗
    function showResetConfirm() {
      document.getElementById('confirmModal').classList.add('show');
    }
    
    // 隐藏重置确认弹窗
    function hideResetConfirm() {
      document.getElementById('confirmModal').classList.remove('show');
    }
    
    // 确认重置
    function confirmReset() {
      for (let i = 1; i <= teamCount; i++) {
        scores[i] = 0;
      }
      renderTeams();
      saveScores();
      hideResetConfirm();
      
      // 添加重置动画
      const teamsGrid = document.getElementById('teamsGrid');
      teamsGrid.style.transform = 'scale(0.9)';
      teamsGrid.style.opacity = '0.3';
      
      setTimeout(() => {
        teamsGrid.style.transform = 'scale(1)';
        teamsGrid.style.opacity = '1';
      }, 400);
    }
    
    // 更新队伍数量
    function updateTeamCount() {
      teamCount = parseInt(document.getElementById('teamCount').value);
      
      // 初始化分数
      for (let i = 1; i <= teamCount; i++) {
        if (!(i in scores)) {
          scores[i] = 0;
        }
      }
      
      // 移除多余的队伍分数
      Object.keys(scores).forEach(key => {
        if (parseInt(key) > teamCount) {
          delete scores[key];
        }
      });
      
      renderTeams();
      saveScores();
    }
    
    // 渲染队伍
    function renderTeams() {
      const teamsGrid = document.getElementById('teamsGrid');
      teamsGrid.innerHTML = '';
      
      for (let i = 1; i <= teamCount; i++) {
        const teamCard = document.createElement('div');
        teamCard.className = `team-card team-${i}`;
        
        teamCard.innerHTML = `
          <div class="team-name">队伍 ${i}</div>
          <div class="score-display">${scores[i].toString().padStart(2, '0')}</div>
          <div class="score-controls">
            <button class="score-btn minus" onclick="updateScore(${i}, -1)">-</button>
            <button class="score-btn plus" onclick="updateScore(${i}, 1)">+</button>
          </div>
        `;
        
        teamsGrid.appendChild(teamCard);
      }
    }
    
    // 更新分数
    function updateScore(teamId, change) {
      scores[teamId] = Math.max(0, Math.min(99, scores[teamId] + change));
      
      // 更新显示
      const scoreDisplay = document.querySelector(`.team-${teamId} .score-display`);
      scoreDisplay.textContent = scores[teamId].toString().padStart(2, '0');
      
      // 添加简单的缩放动画效果
      scoreDisplay.style.transform = 'scale(1.2)';
      
      setTimeout(() => {
        scoreDisplay.style.transform = 'scale(1)';
      }, 200);
      
      // 添加粒子效果
      createScoreParticles(scoreDisplay, change > 0);
      
      saveScores();
    }
    
    // 创建分数变化粒子效果
    function createScoreParticles(element, isPositive) {
      const rect = element.getBoundingClientRect();
      const centerX = rect.left + rect.width / 2;
      const centerY = rect.top + rect.height / 2;
      
      for (let i = 0; i < 8; i++) {
        const particle = document.createElement('div');
        particle.style.position = 'fixed';
        particle.style.left = centerX + 'px';
        particle.style.top = centerY + 'px';
        particle.style.width = '6px';
        particle.style.height = '6px';
        particle.style.borderRadius = '50%';
        particle.style.backgroundColor = isPositive ? '#50C878' : '#ff6b6b';
        particle.style.pointerEvents = 'none';
        particle.style.zIndex = '1000';
        particle.style.boxShadow = `0 0 10px ${isPositive ? '#50C878' : '#ff6b6b'}`;
        
        document.body.appendChild(particle);
        
        const angle = (i / 8) * Math.PI * 2;
        const distance = 50 + Math.random() * 30;
        const endX = centerX + Math.cos(angle) * distance;
        const endY = centerY + Math.sin(angle) * distance;
        
        particle.animate([
          { 
            transform: 'translate(0, 0) scale(1)', 
            opacity: 1 
          },
          { 
            transform: `translate(${endX - centerX}px, ${endY - centerY}px) scale(0)`, 
            opacity: 0 
          }
        ], {
          duration: 600,
          easing: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)'
        }).onfinish = () => {
          document.body.removeChild(particle);
        };
      }
    }
    
    // 保存分数到本地存储
    function saveScores() {
      const data = {
        teamCount: teamCount,
        scores: scores,
        timestamp: new Date().toISOString()
      };
      localStorage.setItem('competitionScores', JSON.stringify(data));
    }
    
    // 从本地存储加载分数
    function loadScores() {
      const saved = localStorage.getItem('competitionScores');
      if (saved) {
        try {
          const data = JSON.parse(saved);
          teamCount = data.teamCount || 4;
          scores = data.scores || {};
          
          // 更新UI
          document.getElementById('teamCount').value = teamCount;
        } catch (e) {
          console.error('加载保存的分数失败:', e);
          initializeDefaultScores();
        }
      } else {
        initializeDefaultScores();
      }
    }
    
    // 初始化默认分数
    function initializeDefaultScores() {
      scores = {};
      for (let i = 1; i <= teamCount; i++) {
        scores[i] = 0;
      }
    }
    
    // 页面加载完成后初始化
    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>